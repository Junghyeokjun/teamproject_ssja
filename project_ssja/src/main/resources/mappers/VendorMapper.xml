<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        
<mapper namespace="teamproject.ssja.mapper.VendorMapper">
	<select id="selectVendor" parameterType="long" resultMap="VendorDtoMap">
		<![CDATA[
			select * from vendor where m_no=#{mNo}
		]]>	
	</select>
<!-- 
	private long vno;
	private long vmno;
	private String vbizname;
	private String vaccount;
	private String vlicense;
	private String vfax;
	
	// 조인을 통해 member에 있는 이름을 가져오기
	private String vmname;

 -->
 	
 	<!-- 페이징은 기본으로 깔고 가기 -->
	<select id="selectVendorProducts" resultMap="VendorDtoMap">
		 <![CDATA[
			select * from 
        	(
			    select
			        rownum rnum , A.*
			    from 
			    (SELECT  * FROM Product where m_no=#{V_NO} order by PRO_NO desc) A 
		    	where rownum <= #{pageNum} * #{amount} 
		    )
			where rnum > (#{pageNum}-1) * #{amount}
   		 ]]>
	</select>
	
	<!-- 페이징은 기본으로 깔고 가기 -->
	<select id="selectVendorQnas" resultMap="BoardDtoMap">
		 <![CDATA[
			select * from 
        	(
			    select
			        rownum rnum , A.*
			    from 
			    (SELECT  * FROM board where b_c_no=#{bcno} and m_no=#{bmno} order by PRO_NO desc) A 
		    	where rownum <= #{pageNum} * #{amount} 
		    )
			where rnum > (#{pageNum}-1) * #{amount}
   		 ]]>
	</select>
	
	<!-- 게시글 맵 -->
	<resultMap type="teamproject.ssja.dto.BoardDto" id="BoardDtoMap">
		<id property="bno" column="b_no"/>
		<result property="bmno" column="m_no"/>
		<result property="bbcno" column="b_c_no"/>
		<result property="bwriter" column="b_writer"/>
		<result property="btitle" column="b_title"/>
		<result property="bcontent" column="b_content"/>
		<result property="bdate" column="b_date"/>
		<result property="blike" column="b_like"/>
		<result property="bhit" column="b_hit"/>
		<result property="beval" column="b_eval"/>
		<result property="prono" column="pro_no"/>
	</resultMap>
	
	
	<resultMap type="teamproject.ssja.dto.vendor.VendorInfoDTO" id="VendorDtoMap">
		<id property="v_no" column="V_NO"/>
		<result property="id" column="M_NO"/>
		<result property="v_bizName" column="V_BIZNAME"/>
		<result property="v_account" column="V_ACCOUNT"/>
		<result property="v_license" column="V_LICENSE"/>
		<result property="v_FAX" column="V_FAX"/>
	</resultMap>	
	
	<resultMap id="ProductsListMap" type="teamproject.ssja.dto.ProductDto">
		<id property="PRO_NO" column="PRO_NO" />
		<result property="V_NO" column="V_NO" />
		<result property="P_C_NO" column="P_C_NO" />
		<result property="PRO_PRICE" column="PRO_PRICE" />
		<result property="PRO_QUANTITY" column="PRO_QUANTITY" />
		<result property="PRO_BANNERIMG" column="PRO_BANNERIMG" />
		<result property="PRO_WISH" column="PRO_WISH" />
		<result property="PRO_SELLCOUNT" column="PRO_SELLCOUNT" />
		<result property="PRO_HIT" column="PRO_HIT" />
		<result property="PRO_BIZNAME" column="PRO_BIZNAME" />
		<result property="PRO_NAME" column="PRO_NAME" />
		<result property="PRO_DATE" column="PRO_DATE" />
	</resultMap>
</mapper>