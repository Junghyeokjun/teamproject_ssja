<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="teamproject.ssja.mapper.NoticeBoardMapper">
<!-- 게시글 맵 -->
	<resultMap id="BoardDtoMap" type="BoardDto" >
		<id property="bno" column="b_no"/>
		<result property="bmno" column="m_no"/>
		<result property="bbcno" column="b_c_no"/>
		<result property="bwriter" column="b_writer"/>
		<result property="btitle" column="b_title"/>
		<result property="bcontent" column="b_content"/>
		<result property="bdate" column="b_date"/>
		<result property="blike" column="b_like"/>
		<result property="bhit" column="b_hit"/>
		<result property="beval" column="b_eval"/>
		<result property="prono" column="pro_no"/>
	</resultMap>

	<select id="read" resultMap="BoardDtoMap">
    	<![CDATA[
        	select  * from board where b_no=#{bno} order by b_no desc
        ]]>
	</select>

	<select id="selectListWithPaging" resultMap="BoardDtoMap">
    	<![CDATA[
        	select * from 
        	(
			    select
			        rownum rnum , A.*
			    from 
			    (SELECT  * FROM board where b_c_no= 10 order by b_no desc) A 
		    	where rownum <= #{pageNum} * #{amount} 
		    )
			where rnum > (#{pageNum}-1) * #{amount}
        ]]>
	</select>

	<select id="selectTotalCount" resultType="long">
    	<![CDATA[
        	SELECT count(*) FROM board b where b. b_c_no= 10
        ]]>
	</select>

</mapper>